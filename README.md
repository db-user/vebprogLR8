# Auto Parts API

Цей проект реалізує систему для управління товарами автомобільних запчастин з функціями автентифікації та авторизації на основі JWT. Проект складається з двох основних частин: **Backend** (FastAPI) та **Frontend** (React).

## Зміст

- [Опис проекту](#опис-проекту)
- [Технічні деталі](#технічні-деталі)
- [Встановлення та запуск](#встановлення-та-запуск)
  - [Запуск бекенду](#запуск-бекенду)
  - [Запуск фронтенду](#запуск-фронтенду)
  - [Контейнеризація (Docker)](#контейнеризація-docker)
- [Структура проекту](#структура-проекту)
- [Тести](#тести)
- [Використання](#використання)
- [Ліцензія](#ліцензія)

## Опис проекту

Цей проект надає REST API для роботи з базою даних автомобільних запчастин. Користувачі можуть виконувати CRUD операції для категорій і товарів. Система підтримує автентифікацію та авторизацію за допомогою JWT токенів, що дозволяє контролювати доступ до різних ендпоінтів в залежності від ролі користувача (адмін, користувач, модератор).

Основні функції:
- Реєстрація користувачів
- Вхід за допомогою JWT токенів
- Доступ до товарів і категорій в залежності від ролі користувача
- Оновлення токенів (refresh token)
- Перевірка паролів на складність

## Технічні деталі

- **Backend**: Python 3.9+, FastAPI, SQLAlchemy, Alembic, JWT, Pydantic
- **Frontend**: React, Axios
- **База даних**: PostgreSQL (можна налаштувати в конфігураціях)
- **Аутентифікація**: JSON Web Tokens (JWT)
- **Тестування**: Pytest

## Встановлення та запуск

### Запуск бекенду

1. Клонувати репозиторій:
    ```bash
    git clone https://github.com/db-user/vebprogLR8.git
    cd auto-parts-api
    ```

2. Створити віртуальне середовище та активувати його:
    ```bash
    python -m venv venv
    source venv/bin/activate  # для Linux/MacOS
    venv\Scripts\activate     # для Windows
    ```

3. Встановити залежності:
    ```bash
    pip install -r requirements.txt
    ```

4. Налаштувати файл середовища `.env` (приклад в `.env.example`):
    ```ini
    SECRET_KEY=your_secret_key
    DATABASE_URL=postgresql://user:password@localhost/dbname
    ```

5. Ініціалізувати базу даних:
    ```bash
    python init_db.py
    ```

6. Запустити сервер FastAPI:
    ```bash
    uvicorn app.main:app --reload
    ```

   Сервер буде доступний за адресою: `http://localhost:8000`

### Запуск фронтенду

1. Перейти до папки фронтенду:
    ```bash
    cd frontend
    ```

2. Встановити залежності:
    ```bash
    npm install
    ```

3. Запустити сервер React:
    ```bash
    npm start
    ```

   Фронтенд буде доступний за адресою: `http://localhost:3000`

### Контейнеризація (Docker)

1. Побудувати Docker образ:
    ```bash
    docker-compose build
    ```

2. Запустити контейнерами:
    ```bash
    docker-compose up
    ```

   Контейнеризований додаток буде доступний за адресами:
   - Бекенд: `http://localhost:8000`
   - Фронтенд: `http://localhost:3000`

## Структура проекту
```
project/
│
├── app/
│   ├── __init__.py
│   ├── main.py                 # Точка входу для FastAPI
│   ├── api/                    # Модулі для обробки API маршрутів
│   │   ├── __init__.py
│   │   ├── items.py            # Маршрути для товарів
│   │   ├── categories.py       # Маршрути для категорій
│   │   └── auth.py             # Маршрути для аутентифікації
│   │
│   ├── crud/                   # Операції з базою даних
│   │   ├── __init__.py
│   │   ├── items.py            # CRUD операції для товарів
│   │   ├── categories.py       # CRUD операції для категорій
│   │   └── users.py            # CRUD операції для користувачів
│   │
│   ├── models/                 # SQLAlchemy моделі
│   │   ├── __init__.py
│   │   ├── item.py             # Модель для товарів
│   │   ├── category.py         # Модель для категорій
│   │   └── user.py             # Модель для користувачів
│   │
│   ├── schemas/                # Pydantic схеми для валідації
│   │   ├── __init__.py
│   │   ├── item.py             # Схема для товарів
│   │   ├── category.py         # Схема для категорій
│   │   └── user.py             # Схема для користувачів
│   │
│   ├── database.py             # Налаштування бази даних
│   ├── auth.py                 # Аутентифікація (JWT)
│   └── config.py               # Конфігурації для секретних ключів, алгоритмів
│
├── requirements.txt            # Залежності проекту
├── .env                        # Секретні ключі та налаштування середовища
├── Dockerfile                  # Docker конфігурація для контейнеризації
└── README.md                   # Документація проекту
```
## Тести

1. Запуск тестів:
    ```bash
    pytest
    ```

2. Тести покривають:
   - Реєстрацію та автентифікацію
   - CRUD операції для категорій і товарів
   - Перевірку ролей користувачів

## Використання

Для реєстрації нового користувача на сервері потрібно виконати POST запит на `/api/auth/register` з тілами:
```json
{
    "username": "user1",
    "password": "password123",
    "email": "user1@example.com"
}
```

Для входу (отримання JWT токену) слід виконати POST запит на /api/auth/login з тілами:
```
{
    "username": "user1",
    "password": "password123"
}
```
## Ліцензія
Цей проект ліцензується під ліцензією MIT
